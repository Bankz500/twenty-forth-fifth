import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as x}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as b,onAuthStateChanged as N,signOut as p}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as E,doc as f,setDoc as h,getDoc as w}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const I={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},y=x(I),c=b(y),m=E(y);window.auth=c;window.db=m;window.joinCreditCardWaitlist=async function(e){try{const r=c.currentUser,o=r?r.uid:`anon_${Date.now()}`,s=f(m,"credit_card_waitlist",o);return await h(s,{name:e.name,email:e.email,address:e.address,requestedAt:new Date().toISOString()},{merge:!0}),{ok:!0}}catch(r){console.error("joinCreditCardWaitlist error",r);try{const o="waitlistQueue",s=JSON.parse(localStorage.getItem(o)||"[]");s.push({...e,requestedAt:new Date().toISOString()}),localStorage.setItem(o,JSON.stringify(s))}catch{}return{ok:!0,queued:!0,error:r}}};let g;const D=6e5;function d(){clearTimeout(g),g=setTimeout(()=>{p(c).then(()=>{window.location.href="login.html"}).catch(e=>{console.error("Error signing out:",e),window.location.href="login.html"})},D)}document.addEventListener("mousemove",d);document.addEventListener("keypress",d);document.addEventListener("click",d);document.addEventListener("scroll",d);document.addEventListener("touchstart",d);d();N(c,async e=>{if(e)try{const r=f(m,"users",e.uid),o=await w(r);if(o.exists()){const s=o.data(),n=(i,l,u="")=>{const a=document.getElementById(i);a&&(a.tagName==="INPUT"?(a.value=l||u,a.placeholder=l||u):a.textContent=l||u)};n("firstName",s.firstName,"First Name"),n("profileUsername",s.firstName,"@syndicate"),n("Deposit-account",s.deposit,"0.00"),n("Profit-wallet",s.profit,"0.00"),n("wallet",s.wallet,"0.00"),n("welcome-message",`Welcome ${s.firstName}`),n("displayEmail",e.email);const t=document.getElementById("status");if(t){const i=s.status||"Processing...";switch(t.textContent=i,i.toLowerCase()){case"active":t.className="bg-green-500 text-white text-xs px-3 py-1 rounded-full";break;case"suspended":t.className="bg-yellow-500 text-white text-xs px-3 py-1 rounded-full";break;case"banned":t.className="bg-red-500 text-white text-xs px-3 py-1 rounded-full";break;case"Processing":t.className="bg-blue-700 text-white text-xs px-3 py-1 rounded-full";break;case"inactive":t.className="bg-gray-500 text-white text-xs px-3 py-1 rounded-full";break;default:t.textContent="Processing",t.className="bg-blue-500 text-white text-xs px-3 py-1 rounded-full"}}}else console.log("No user document found."),console.error("No user data found.")}catch(r){console.error("Error fetching user data:",r)}else console.log("No user signed in. Redirecting to sign-in page."),window.location.href="login.html"});window.signOut=function(){p(c).then(()=>{alert("Signed out successfully!"),window.location.href="login.html"}).catch(e=>{alert("Error signing out: "+e.message)})};window.updateProfile=async function(){var r,o;const e=c.currentUser;if(e){const s=f(m,"users",e.uid),n={firstName:((r=document.getElementById("firstName"))==null?void 0:r.value.trim())||"",lastName:((o=document.getElementById("lastName"))==null?void 0:o.value.trim())||""},t=document.querySelector('button[type="submit"]');t&&(t.disabled=!0,t.textContent="Saving changes...");try{await h(s,n,{merge:!0}),alert("Profile updated successfully!")}catch(i){console.error("Error updating profile:",i),alert("Error updating profile: "+i.message)}finally{t&&(t.disabled=!1,t.textContent="Save Changes")}}else alert("No user is currently signed in.")};window.showUserInfo=async function(){const e=c.currentUser;if(e)try{const r=f(m,"users",e.uid),o=await w(r);if(o.exists()){const s=o.data(),n=(i,l,u="")=>{const a=document.getElementById(i);a&&(a.value=l||u,a.hasAttribute("placeholder")&&(a.placeholder=l||u))};n("firstName",s.firstName,"First Name"),n("status",s.status,"status"),n("email",e.email),n("phone",s.phone);const t=document.getElementById("profileInfoCard");t&&t.classList.remove("hidden")}else console.log("No user document found."),alert("No user data found.")}catch(r){console.error("Error fetching user info:",r),alert("Error fetching user information.")}else alert("No user is currently signed in.")};
