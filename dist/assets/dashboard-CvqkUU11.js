import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as D}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as w,onAuthStateChanged as S,signOut as v}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as M,doc as q,getDoc as H,collection as f,query as E,where as x,getDocs as C}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const A={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},B=D(A),$=w(B),g=M(B);let I;const F=2e5;function s(){clearTimeout(I),I=setTimeout(()=>{const i=w();v(i).then(()=>{window.location.href="login.html"}).catch(d=>{console.error("Error signing out:",d),window.location.href="login.html"})},F)}document.addEventListener("mousemove",s);document.addEventListener("keypress",s);document.addEventListener("click",s);document.addEventListener("scroll",s);document.addEventListener("touchstart",s);s();S($,async i=>{if(i){console.log("User is logged in:",i.uid);const d=q(g,"users",i.uid),p=await H(d);if(p.exists()){const e=p.data();document.getElementById("Deposit-account").textContent=`${e.deposit||"$0.00"}`,document.getElementById("history1").textContent=`${e.history1||"No history available"}`,document.getElementById("history2").textContent=`${e.history2||""}`,document.getElementById("history3").textContent=`${e.history3||""}`,document.getElementById("history4").textContent=`${e.history4||""}`,document.getElementById("history5").textContent=`${e.history5||""}`,document.getElementById("history6").textContent=`${e.history6||""}`,document.getElementById("history7").textContent=`${e.history7||""}`,document.getElementById("savings").textContent=`${e.savings||"$0.00"}`,document.getElementById("fixed").textContent=`${e.fixed||"$0.00"}`;const r=document.getElementById("pending1"),a=document.getElementById("pending2"),c=document.getElementById("pending3");if(e.pending1&&e.pending1.trim()!==""){const t=e.pending1.split("|");if(t.length>=3){r.classList.remove("hidden");const o=r.querySelector("h3"),n=r.querySelector("p");o&&(o.textContent=t[0].trim()+" | "+t[1].trim()),n&&(n.textContent=t.slice(2).join("|").trim())}}if(e.pending2&&e.pending2.trim()!==""){const t=e.pending2.split("|");if(t.length>=3){a.classList.remove("hidden");const o=a.querySelector("h3"),n=a.querySelector("p");o&&(o.textContent=t[0].trim()+" | "+t[1].trim()),n&&(n.textContent=t.slice(2).join("|").trim())}}if(e.pending3&&e.pending3.trim()!==""){const t=e.pending3.split("|");if(t.length>=3){c.classList.remove("hidden");const o=c.querySelector("h3"),n=c.querySelector("p");o&&(o.textContent=t[0].trim()+" | "+t[1].trim()),n&&(n.textContent=t.slice(2).join("|").trim())}}e.pending1&&e.pending2&&e.pending3&&e.pending1.trim()!==""&&e.pending2.trim()!==""&&e.pending3.trim()!==""?document.getElementById("pending-limit-notice").classList.remove("hidden"):document.getElementById("pending-limit-notice").classList.add("hidden"),setTimeout(colorPendingTransactions,500);const h=document.getElementById("user-first-name");e.firstName&&e.name.trim()!==""?h.textContent=e.firstName:(h.textContent="",console.log("User data does not contain a valid name field."));const b=f(g,"history"),N=E(b,x("userId","==",i.uid)),u=await C(N),l=document.getElementById("history-container");if(l.innerHTML="",!u.empty)u.forEach(t=>{const o=t.data(),n=document.createElement("div");n.className="bg-white p-4 rounded-lg shadow-md text-center h-16",n.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${o.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${t.id}</p>
                                <p class="text-gray-600">$${o.amount||""}</p>
                            `,l.appendChild(n)});else{console.log("No transaction history found for this user.");const t=document.createElement("div");t.className="bg-white p-4 rounded-lg shadow-md text-center h-16",t.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No history</h3>
                            <p class="text-gray-600">You have no transaction history.</p>
                        `,l.appendChild(t)}const T=f(g,"pending"),L=E(T,x("userId","==",i.uid)),y=await C(L),m=document.getElementById("pending-container");if(m.innerHTML="",!y.empty)y.forEach(t=>{const o=t.data(),n=document.createElement("div");n.className="bg-white p-4 rounded-lg shadow-md text-center h-16",n.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${o.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${t.id}</p>
                                <p class="text-gray-600">$${o.amount||""}</p>
                            `,m.appendChild(n)});else{console.log("No pending transactions found for this user.");const t=document.createElement("div");t.className="bg-white p-4 rounded-lg shadow-md text-center h-16",t.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No pending transactions</h3>
                            <p class="text-gray-600">You have no pending transactions.</p>
                        `,m.appendChild(t)}}else console.log("No user document found in Firestore."),alert("No user data found.")}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="login..html"});window.signOut=function(){v($).then(()=>{alert("Signed out successfully!"),window.location.href="login.html"}).catch(i=>{alert("Error signing out: "+i.message)})};
