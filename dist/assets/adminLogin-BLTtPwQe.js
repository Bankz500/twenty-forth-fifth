import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as u}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getAuth as g,signInWithEmailAndPassword as y,createUserWithEmailAndPassword as w,sendPasswordResetEmail as h}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";const f={apiKey:"AIzaSyDk8K22XfrsAQAX7WarxSq_BnwO1YQLDSc",authDomain:"twenty-third-forth-ee57c.firebaseapp.com",projectId:"twenty-third-forth-ee57c",storageBucket:"twenty-third-forth-ee57c.firebasestorage.app",messagingSenderId:"47210898997",appId:"1:47210898997:web:d25c23eee45a7660cef37c",measurementId:"G-ESYD665GWG"},p=u(f),m=g(p);window.switchToLogin=function(){document.getElementById("loginTab").classList.add("bg-white","text-gray-900","shadow-sm"),document.getElementById("loginTab").classList.remove("text-gray-600","hover:text-gray-900"),document.getElementById("signupTab").classList.remove("bg-white","text-gray-900","shadow-sm"),document.getElementById("signupTab").classList.add("text-gray-600","hover:text-gray-900"),document.getElementById("adminLoginForm").classList.remove("hidden"),document.getElementById("adminSignupForm").classList.add("hidden"),document.getElementById("subtitleText").textContent="Sign in to manage testimonials",document.getElementById("errorMessage").classList.add("hidden"),document.getElementById("successMessage").classList.add("hidden")};window.switchToSignup=function(){document.getElementById("signupTab").classList.add("bg-white","text-gray-900","shadow-sm"),document.getElementById("signupTab").classList.remove("text-gray-600","hover:text-gray-900"),document.getElementById("loginTab").classList.remove("bg-white","text-gray-900","shadow-sm"),document.getElementById("loginTab").classList.add("text-gray-600","hover:text-gray-900"),document.getElementById("adminSignupForm").classList.remove("hidden"),document.getElementById("adminLoginForm").classList.add("hidden"),document.getElementById("subtitleText").textContent="Create a new admin account",document.getElementById("errorMessage").classList.add("hidden"),document.getElementById("successMessage").classList.add("hidden")};window.togglePasswordVisibility=function(){const t=document.getElementById("adminPassword"),e=document.getElementById("passwordEyeIcon");t.type==="password"?(t.type="text",e.classList.remove("fa-eye"),e.classList.add("fa-eye-slash")):(t.type="password",e.classList.remove("fa-eye-slash"),e.classList.add("fa-eye"))};window.toggleSignupPasswordVisibility=function(){const t=document.getElementById("signupPassword"),e=document.getElementById("signupPasswordEyeIcon");t.type==="password"?(t.type="text",e.classList.remove("fa-eye"),e.classList.add("fa-eye-slash")):(t.type="password",e.classList.remove("fa-eye-slash"),e.classList.add("fa-eye"))};window.toggleSignupConfirmPasswordVisibility=function(){const t=document.getElementById("signupConfirmPassword"),e=document.getElementById("signupConfirmPasswordEyeIcon");t.type==="password"?(t.type="text",e.classList.remove("fa-eye"),e.classList.add("fa-eye-slash")):(t.type="password",e.classList.remove("fa-eye-slash"),e.classList.add("fa-eye"))};window.showForgotPassword=function(){document.getElementById("adminLoginForm").classList.add("hidden"),document.getElementById("forgotPasswordForm").classList.remove("hidden"),document.getElementById("subtitleText").textContent="Reset your admin password",document.getElementById("errorMessage").classList.add("hidden"),document.getElementById("successMessage").classList.add("hidden")};window.hideForgotPassword=function(){document.getElementById("forgotPasswordForm").classList.add("hidden"),document.getElementById("adminLoginForm").classList.remove("hidden"),document.getElementById("subtitleText").textContent="Sign in to manage testimonials",document.getElementById("errorMessage").classList.add("hidden"),document.getElementById("successMessage").classList.add("hidden"),document.getElementById("forgotPasswordEmail").value=""};document.getElementById("adminLoginForm").addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("adminEmail").value.trim(),d=document.getElementById("adminPassword").value,o=document.getElementById("loginBtn"),a=document.getElementById("errorMessage"),i=document.getElementById("errorText");a.classList.add("hidden");try{o.disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Signing in...';const n=await y(m,e,d);window.location.href="admin.html"}catch(n){console.error("Login error:",n);let s="An error occurred during login.";n.code==="auth/user-not-found"||n.code==="auth/wrong-password"?s="Invalid email or password.":n.code==="auth/invalid-email"?s="Invalid email address.":n.code==="auth/too-many-requests"?s="Too many failed attempts. Please try again later.":n.code==="auth/network-request-failed"&&(s="Network error. Please check your connection."),i.textContent=s,a.classList.remove("hidden")}finally{o.disabled=!1,o.innerHTML='<i class="fas fa-sign-in-alt mr-2"></i>Sign In to Admin Dashboard'}});document.getElementById("adminSignupForm").addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("signupEmail").value.trim(),d=document.getElementById("signupPassword").value,o=document.getElementById("signupConfirmPassword").value,a=document.getElementById("signupBtn"),i=document.getElementById("errorMessage"),n=document.getElementById("successMessage"),s=document.getElementById("errorText"),r=document.getElementById("successText");if(i.classList.add("hidden"),n.classList.add("hidden"),d!==o){s.textContent="Passwords do not match.",i.classList.remove("hidden");return}if(d.length<6){s.textContent="Password must be at least 6 characters long.",i.classList.remove("hidden");return}try{a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Creating account...';const c=await w(m,e,d);r.textContent="Admin account created successfully! Redirecting...",n.classList.remove("hidden"),setTimeout(()=>{window.location.href="admin.html"},1500)}catch(c){console.error("Signup error:",c);let l="An error occurred during signup.";c.code==="auth/email-already-in-use"?l="This email is already registered. Please sign in instead.":c.code==="auth/invalid-email"?l="Invalid email address.":c.code==="auth/weak-password"?l="Password is too weak. Please use a stronger password.":c.code==="auth/network-request-failed"&&(l="Network error. Please check your connection."),s.textContent=l,i.classList.remove("hidden")}finally{a.disabled=!1,a.innerHTML='<i class="fas fa-user-plus mr-2"></i>Create Admin Account'}});document.getElementById("forgotPasswordForm").addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("forgotPasswordEmail").value.trim(),d=document.getElementById("forgotPasswordBtn"),o=document.getElementById("errorMessage"),a=document.getElementById("successMessage"),i=document.getElementById("errorText"),n=document.getElementById("successText");o.classList.add("hidden"),a.classList.add("hidden");try{d.disabled=!0,d.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Sending reset link...',await h(m,e,{url:window.location.origin+"/admin-login.html",handleCodeInApp:!1}),n.textContent="Password reset link sent! Check your email. The link will expire in 30 minutes.",a.classList.remove("hidden"),document.getElementById("forgotPasswordEmail").value=""}catch(s){console.error("Password reset error:",s);let r="An error occurred while sending the reset link.";s.code==="auth/user-not-found"?r="No account found with this email address.":s.code==="auth/invalid-email"?r="Invalid email address.":s.code==="auth/too-many-requests"?r="Too many requests. Please try again later.":s.code==="auth/network-request-failed"&&(r="Network error. Please check your connection."),i.textContent=r,o.classList.remove("hidden")}finally{d.disabled=!1,d.innerHTML='<i class="fas fa-paper-plane mr-2"></i>Send Reset Link'}});
