import"./modulepreload-polyfill-B5Qt9EMX.js";import"./index.esm-BeIn6wDe.js";import{initializeApp as d}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getAuth as l,createUserWithEmailAndPassword as c,sendEmailVerification as u,onAuthStateChanged as m}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";import{getFirestore as p,setDoc as g,doc as f}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";const y={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},i=d(y),o=l(i),b=p(i),h=async t=>{const e=document.getElementById("create-account-btn"),n=document.getElementById("spinner");try{e.disabled=!0,e.textContent="Creating Account...",n.classList.remove("hidden");const a=(await c(o,t.email,t.password)).user;await g(f(b,"users",a.uid),{firstName:t.firstName,lastName:t.lastName,email:t.email,accountType:t.accountType,createdAt:new Date().toISOString(),businessName:document.getElementById("business-name").value,businessType:document.getElementById("business-type").value,businessEin:document.getElementById("business-ein").value,businessCert:document.getElementById("business-cert").value}),await u(a),document.getElementById("success-modal").classList.remove("hidden"),m(o,s=>{s&&(s.emailVerified?console.log("Email verified. Access granted."):console.log("Please verify your email address."))})}catch(r){console.error("Error during sign-up:",r);const a=w(r.code),s=document.createElement("div");s.className="fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",s.innerHTML=`
                <strong class="font-bold">Error!</strong>
                <span class="block sm:inline">${a}</span>
            `,document.body.appendChild(s),setTimeout(()=>{s.remove()},5e3)}finally{e.disabled=!1,e.textContent="Create Account",n.classList.add("hidden")}},w=t=>{switch(t){case"auth/email-already-in-use":return"This email is already registered. Please use a different email or try logging in.";case"auth/weak-password":return"Password is too weak. Please use at least 8 characters with a mix of letters, numbers, and symbols.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/network-request-failed":return"Network error. Please check your internet connection and try again.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"An unexpected error occurred. Please try again or contact support."}};document.querySelector("#business-info-form").addEventListener("submit",t=>{t.preventDefault();const e={firstName:document.getElementById("first-name").value.trim(),lastName:document.getElementById("last-name").value.trim(),email:document.getElementById("email").value.trim(),accountType:document.getElementById("account-type").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirm-password").value};if(!e.firstName||!e.lastName||!e.email||!e.password||!e.accountType){alert("All fields are required.");return}if(e.password!==e.confirmPassword){alert("Passwords do not match.");return}if(e.password.length<8){alert("Password must be at least 8 characters long.");return}h(e)});
