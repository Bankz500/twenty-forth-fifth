import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as y}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as N,onAuthStateChanged as x,signOut as p}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as E,doc as m,getDoc as h,setDoc as b}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const I={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},w=y(I),d=N(w),f=E(w);let g;const v=6e5;function u(){clearTimeout(g),g=setTimeout(()=>{p(d).then(()=>{window.location.href="login.html"}).catch(t=>{console.error("Error signing out:",t),window.location.href="login.html"})},v)}document.addEventListener("mousemove",u);document.addEventListener("keypress",u);document.addEventListener("click",u);document.addEventListener("scroll",u);document.addEventListener("touchstart",u);u();x(d,async t=>{if(t)try{const n=m(f,"users",t.uid),i=await h(n);if(i.exists()){const s=i.data(),o=(a,c,l="")=>{const r=document.getElementById(a);r&&(r.tagName==="INPUT"?(r.value=c||l,r.placeholder=c||l):r.textContent=c||l)};o("firstName",s.firstName,"First Name"),o("profileUsername",s.firstName,"@syndicate"),o("Deposit-account",s.deposit,"0.00"),o("Profit-wallet",s.profit,"0.00"),o("wallet",s.wallet,"0.00"),o("welcome-message",`Welcome ${s.firstName}`),o("displayEmail",t.email);const e=document.getElementById("status");if(e){const a=s.status||"Unknown";switch(e.textContent=a,a.toLowerCase()){case"active":e.className="bg-green-500 text-white text-xs px-3 py-1 rounded-full";break;case"suspended":e.className="bg-yellow-500 text-white text-xs px-3 py-1 rounded-full";break;case"banned":e.className="bg-red-500 text-white text-xs px-3 py-1 rounded-full";break;default:e.textContent="Unknown Status",e.className="bg-gray-500 text-white text-xs px-3 py-1 rounded-full"}}}else console.log("No user document found."),console.error("No user data found.")}catch(n){console.error("Error fetching user data:",n)}else console.log("No user signed in. Redirecting to sign-in page."),window.location.href="login.html"});window.signOut=function(){p(d).then(()=>{alert("Signed out successfully!"),window.location.href="login.html"}).catch(t=>{alert("Error signing out: "+t.message)})};window.updateProfile=async function(){var n,i;const t=d.currentUser;if(t){const s=m(f,"users",t.uid),o={firstName:((n=document.getElementById("firstName"))==null?void 0:n.value.trim())||"",lastName:((i=document.getElementById("lastName"))==null?void 0:i.value.trim())||""},e=document.querySelector('button[type="submit"]');e&&(e.disabled=!0,e.textContent="Saving changes...");try{await b(s,o,{merge:!0}),alert("Profile updated successfully!")}catch(a){console.error("Error updating profile:",a),alert("Error updating profile: "+a.message)}finally{e&&(e.disabled=!1,e.textContent="Save Changes")}}else alert("No user is currently signed in.")};window.showUserInfo=async function(){const t=d.currentUser;if(t)try{const n=m(f,"users",t.uid),i=await h(n);if(i.exists()){const s=i.data(),o=(a,c,l="")=>{const r=document.getElementById(a);r&&(r.value=c||l,r.hasAttribute("placeholder")&&(r.placeholder=c||l))};o("firstName",s.firstName,"First Name"),o("status",s.status,"status"),o("email",t.email),o("phone",s.phone);const e=document.getElementById("profileInfoCard");e&&e.classList.remove("hidden")}else console.log("No user document found."),alert("No user data found.")}catch(n){console.error("Error fetching user info:",n),alert("Error fetching user information.")}else alert("No user is currently signed in.")};
